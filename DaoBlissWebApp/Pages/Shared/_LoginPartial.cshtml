@using DaoBlissWebApp.Common.Entities
@using Microsoft.AspNetCore.Identity

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@if (SignInManager.IsSignedIn(User))
{
    <div class="absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg py-2 hidden user-menu z-50">
        <a asp-area="Identity" asp-page="/Account/Manage/Index"
           class="block px-4 py-2 text-black hover:bg-gray-100">
            Thông tin tài khoản
        </a>
        <button id="logoutBtn"
                class="block w-full text-left px-4 py-2 text-black hover:bg-gray-100">
            Đăng xuất
        </button>
    </div>

}
else
{
    <div class="absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg py-2 hidden user-menu z-50">
        <a asp-area="Identity" asp-page="/Account/Login"
           class="block px-4 py-2 text-black hover:bg-gray-100">
            Đăng nhập
        </a>
        <a asp-area="Identity" asp-page="/Account/Register" 
           class="block px-4 py-2 text-black hover:bg-gray-100">
            Đăng ký
        </a>
    </div>

}

<form id="logoutForm" asp-area="Identity" asp-page="/Account/Logout"
      asp-route-returnUrl="@Url.Page("/Index", new { area = "" })"
      method="post" class="d-none">
</form>

<script>
    document.getElementById("logoutBtn").addEventListener("click", function () {
        document.getElementById("logoutForm").submit();
    });
</script>
